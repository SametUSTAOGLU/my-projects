AWSTemplateFormatVersion: 2010-09-09
Description: |
  This CloudFormation Template was written for 
  convert desimal to raman.Website will be deployed on Amazon Linux 2 (ami-02e136e904f3da870) 
  EC2 Instance with custom security group which allows http connections
   on port 80 and ssh port 22 from anywhere.  Website 
  is downloaded from my Public Github repository, then deployed on Apache Web Server.


Resources:
  mySG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: "80 and 22 ports opened" # Required
      GroupName: SG-romen
      SecurityGroupIngress:
        - CidrIp: 0.0.0.0/0
          ToPort: 22
          FromPort: 22
          IpProtocol: tcp
        - CidrIp: 0.0.0.0/0
          ToPort: 80
          FromPort: 80
          IpProtocol: tcp
      V
  
  myEC2:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: ami-0dc2d3e4c0f9ebd18
      InstanceType: t2.micro
      KeyName: key
      SecurityGroupIds:
          - !GetAtt mySG.GroupId
      UserData: !Base64 |
        #!/bin/bash
        yum update -y
        yum install git -y
        sudo pip3 install flask 
        git clone https://github.com/sametustaoglu/my-projects.git
        cd /home/ec2-user
        mkdir proje
        cd proje
        sudo cp -r /my-projects/aws/projects/Project-001-Roman-Numerals-Converter/* /home/ec2-user/proje
        sudo python3 app.py
        
Outputs:
  WebsiteURL:
    Value: !Sub 
      - http://${PublicAddress}
      - PublicAddress: !GetAtt myEC2.PublicDnsName